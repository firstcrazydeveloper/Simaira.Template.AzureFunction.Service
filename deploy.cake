//////////////////////////////////////////////////////////////////////
// PROJECT CONFIG
//////////////////////////////////////////////////////////////////////

#tool nuget:?package=NUnit.ConsoleRunner&version=3.4.0


var projectName = "SimairaDigital.Backend.ItemManagement";
var projectKey = "SimairaDigital.Backend.ItemManagement";

var target = Argument("target", "Default");
var configuration = Argument("configuration", "Release");
var path = Argument("path", ".");
var artifactsDir = Directory(path + "/artifacts");
var apiKey = "";



//////////////////////////////////////////////////////////////////////
// BUILD RECIPES
//////////////////////////////////////////////////////////////////////



//////////////////////////////////////////////////////////////////////
// BUILD TASKS
//////////////////////////////////////////////////////////////////////

Task("__Push")
    .Does(() => 
{    
    Information("__Push");
	var packages = GetFiles(artifactsDir.ToString() + "/*.nupkg");
	Information(packages);
    NuGetPush(packages, new NuGetPushSettings {
        Source = "https://api.nuget.org/v3/index.json",
        ApiKey = apiKey
    });
});


Task("Build")
    .IsDependentOn("__Push")
    ;

///////////////////////////////////////////////////////////////////////////////
// PRIMARY TARGETS
///////////////////////////////////////////////////////////////////////////////

Task("Default")
    .IsDependentOn("Build")
    ;

///////////////////////////////////////////////////////////////////////////////
// EXECUTION
///////////////////////////////////////////////////////////////////////////////

RunTarget(target);
